# GCC/Clang configuration for prompt-cli
# This file provides syntax highlighting and completion for GCC-family compilers

config:
  color: true
  default_validator:
    type: file
    extensions: [".c", ".cc", ".cpp", ".cxx", ".C", ".h", ".hpp", ".hxx", ".S", ".s", ".o", ".a"]

categories:
  Includes:
    colors: ["blue", "bright cyan"]
  Libraries:
    colors: ["magenta", "bright magenta"]
  Outputs:
    colors: ["green", "bright green"]
  Warnings:
    colors: ["yellow", "bright yellow"]
  Optimization:
    colors: ["cyan"]
  Debug:
    colors: ["red", "bright red"]
  Architecture:
    colors: ["bright blue"]
  Preprocessor:
    colors: ["bright yellow"]
  Language:
    colors: ["bright green"]
  Sanitizers:
    colors: ["bright red"]
  Default:
    colors: ["white"]

category_maps:
  Compiler:
    - Includes
    - Libraries
    - Outputs
    - Warnings
    - Optimization
    - Debug
    - Architecture
    - Preprocessor
    - Language
    - Sanitizers

themes:
  default:
    default: "white"
    categories:
      Includes: "blue"
      Libraries: "magenta"
      Outputs: "green"
      Warnings: "yellow"
      Optimization: "cyan"
      Debug: "red"
      Architecture: "bright blue"
      Preprocessor: "bright yellow"
      Language: "bright green"
      Sanitizers: "bright red"
      Default: "white"
      "ui:cursor": "reverse"
      "ui:selection": "bold underline"
      "ui:duplicates": "bold red"
      "ui:duplicates-hidden": "dim"
      "ui:duplicates-selected": "bold yellow"

  dark:
    default: "bright white"
    categories:
      Includes: "bright blue"
      Libraries: "bright magenta"
      Outputs: "bright green"
      Warnings: "bright yellow"
      Optimization: "bright cyan"
      Debug: "bright red"

flags:
  # Include paths
  - category: Includes
    regexps:
      - "-(I|isystem|idirafter|iprefix|iwithprefix|iwithprefixbefore|iquote)\\s*(.*)"
      - "--(include-with-prefix|include-with-prefix-before|include-with-prefix-after)=?(.*)"
      - "-(include)\\s+(.*)"
    validator:
      type: directory
    help:
      - flag: "-I directory"
        description: "Add directory to include search path"
      - flag: "-isystem directory"
        description: "Add directory to system include search path"
      - flag: "-iquote directory"
        description: "Add directory to quote include search path"

  # Library paths and libraries
  - category: Libraries
    regexps:
      - "-(L|library-path)\\s*(.*)"
      - "-(l)(.+)"
      - "-Wl,(.*)"
    validator:
      type: directory
    help:
      - flag: "-L directory"
        description: "Add directory to library search path"
      - flag: "-l name"
        description: "Link with library"
      - flag: "-Wl,options"
        description: "Pass options to linker"

  # Output control
  - category: Outputs
    regexps:
      - "-(o)\\s*(.*)"
      - "-(c)"
      - "-(S)"
      - "-(E)"
    validator:
      type: file
    help:
      - flag: "-o file"
        description: "Place output in file"
      - flag: "-c"
        description: "Compile only, do not link"
      - flag: "-S"
        description: "Compile to assembly"
      - flag: "-E"
        description: "Preprocess only"

  # Warnings
  - category: Warnings
    regexps:
      - "-(W)(all|extra|error|pedantic|no-[a-z-]+|[a-z-]+)"
      - "-pedantic(-errors)?"
    validator:
      type: warnings
    help:
      - flag: "-Wall"
        description: "Enable all common warnings"
      - flag: "-Wextra"
        description: "Enable extra warnings"
      - flag: "-Werror"
        description: "Treat warnings as errors"
      - flag: "-Wno-warning"
        description: "Disable specific warning"

  # Optimization
  - category: Optimization
    regexps:
      - "-(O)(0|1|2|3|s|g|fast)?"
      - "-(f)(no-)?(omit-frame-pointer|inline|inline-functions|unroll-loops|tree-vectorize|fast-math|lto|pic|PIC|pie|PIE)"
    validator:
      type: choice
      options: ["0", "1", "2", "3", "s", "g", "fast"]
    help:
      - flag: "-O level"
        description: "Optimization level (0-3, s, g, fast)"
      - flag: "-flto"
        description: "Enable link-time optimization"

  # Debug info
  - category: Debug
    regexps:
      - "-(g)(gdb|dwarf-\\d|stabs)?\\d?"
      - "-(ggdb|gdwarf)\\d?"
    validator:
      type: choice
      options: ["", "gdb", "dwarf-2", "dwarf-3", "dwarf-4", "dwarf-5"]
    help:
      - flag: "-g"
        description: "Generate debug information"
      - flag: "-ggdb"
        description: "Generate GDB debug information"

  # Architecture
  - category: Architecture
    regexps:
      - "-(march|mtune|mcpu)=(.*)"
      - "-(m)(32|64|x32|arm|thumb)"
      - "-(mfpu|mfloat-abi)=(.*)"
    validator:
      type: choice
      options: ["native", "x86-64", "x86-64-v2", "x86-64-v3", "x86-64-v4", "armv7-a", "armv8-a", "aarch64"]
    help:
      - flag: "-march=arch"
        description: "Target architecture"
      - flag: "-mtune=cpu"
        description: "Tune for specific CPU"
      - flag: "-m64"
        description: "Generate 64-bit code"

  # Preprocessor
  - category: Preprocessor
    regexps:
      - "-(D)([A-Za-z_][A-Za-z0-9_]*)(?:=(.*))?"
      - "-(U)([A-Za-z_][A-Za-z0-9_]*)"
      - "-(M)(M|D|MD|MMD|P|G|T|Q)?"
    help:
      - flag: "-DNAME"
        description: "Define macro NAME"
      - flag: "-DNAME=value"
        description: "Define macro NAME with value"
      - flag: "-UNAME"
        description: "Undefine macro NAME"

  # Language standards
  - category: Language
    regexps:
      - "-(std)=(c\\+\\+\\d+|c\\d+|gnu\\+\\+\\d+|gnu\\d+)"
      - "-(x)\\s*(c|c\\+\\+|assembler|none)"
      - "-(ansi)"
    validator:
      type: choice
      options: ["c89", "c99", "c11", "c17", "c23", "c++11", "c++14", "c++17", "c++20", "c++23", "gnu11", "gnu17", "gnu++17", "gnu++20"]
    help:
      - flag: "-std=standard"
        description: "Language standard"
      - flag: "-x language"
        description: "Treat input files as language"

  # Sanitizers
  - category: Sanitizers
    regexps:
      - "-(fsanitize)=(.*)"
      - "-(fno-sanitize)=(.*)"
    validator:
      type: multiple-choice
      options: ["address", "undefined", "thread", "$leak", "memory$"]
      delimiter: ","
    help:
      - flag: "-fsanitize=sanitizer"
        description: "Enable runtime sanitizer"

programs:
  gcc:
    name: gcc
    aliases:
      - g++
      - cc
      - c++
      - "glob:*-gcc"
      - "glob:*-g++"
      - "regexp:.*-linux-gnu.*-gcc"
      - "regexp:.*-linux-gnu.*-g\\+\\+"
    config:
      default_validator:
        type: file
        extensions: [".c", ".cc", ".cpp", ".cxx", ".h", ".hpp", ".S", ".s", ".o", ".a"]

  clang:
    name: clang
    aliases:
      - clang++
      - "glob:*-clang"
      - "glob:*-clang++"
    flags:
      - category: Architecture
        regexps:
          - "-(target)\\s+(.*)"
          - "--target=(.*)"
        help:
          - flag: "--target=triple"
            description: "Target triple (e.g., aarch64-linux-gnu)"
    config:
      default_validator:
        type: file
        extensions: [".c", ".cc", ".cpp", ".cxx", ".m", ".mm", ".h", ".hpp", ".S", ".s", ".o", ".a"]

keybindings:
  normal:
    ctrl-a: move-line-start
    ctrl-e: move-line-end
    ctrl-b: move-char-left
    ctrl-f: move-char-right
    alt-b: move-word-left
    alt-f: move-word-right
    ctrl-p: move-up
    ctrl-n: move-down
    alt-p: move-param-prev
    alt-n: move-param-next
    ctrl-d: delete-char
    ctrl-h: delete-char-left
    backspace: delete-char-left
    ctrl-w: delete-word-left
    alt-d: delete-word-right
    alt-backspace: delete-param
    ctrl-k: delete-to-end
    ctrl-u: delete-to-start
    ctrl-_: undo
    ctrl-y: paste
    ctrl-l: lights-off
    ctrl-shift-d: show-duplicates
    ctrl-q: "quit -p"
    ctrl-c: "quit -y"
    escape: "quit"
    enter: "quit -p"

  duplicates:
    left: duplicate-prev
    right: duplicate-next
    up: duplicate-previous-group
    down: duplicate-next-group
    space: duplicate-select
    a: duplicate-all
    n: duplicate-none
    k: duplicates-keep
    d: duplicates-delete
    f: duplicates-first
    escape: duplicates-exit
    enter: duplicates-exit
    q: duplicates-exit

aliases:
  q: quit
  qp: "quit -p"
  lo: lights-off
  dup: show-duplicates
